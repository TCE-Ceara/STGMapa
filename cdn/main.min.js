let STGMapa=(()=>{let t=[],i,c,u,f,y,m="",p=[{status:"Transição dispensada",fill:"#858585",stroke:"#434343",color:"#ffffff"},{status:"Aguardando transição",fill:"#ffeb3b",stroke:"#776B03",color:"#554C00"},{status:"Transição formalizada",fill:"#388e3c",stroke:"#164A18",color:"#ffffff"},{status:"Transição em andamento",fill:"#1976d2",stroke:"#00366C",color:"#ffffff"},{status:"Transição em atraso",fill:"#d32f2f",stroke:"#6D0606",color:"#ffffff"},{status:"Transição encerrada",fill:"#81c784",stroke:"#376139",color:"#274829"}],o=r=>{try{var l=t.find(e=>e.id===r);if(!l)throw"Não foi possivel carregar o dados do municipios selecionado";{let{id:e,nome:t,status:o,data_alteracao:a}=l;i=document.getElementById("cidade_nulo"),c=document.getElementById("cidade_dados"),u=document.getElementById("selectbox_cidades"),f=document.getElementById("cidade_titulo"),y=document.getElementById("label-status"),m=document.getElementById("data_alteracao"),i.style.display="none",c.style.display="block";var s=document.querySelector(".active"),{fill:n="#C9C9C9",color:d="#7c7c7c"}=(s&&s.classList.remove("active"),document.querySelector("#"+r).classList.add("active"),u.value=e,f.innerText=t,p.find(e=>e.status===o)||{});y.innerText=o||"...",y.style.color=d,y.style.backgroundColor=n,m.innerText=a||"...",g(l)}}catch(e){console.error(e)}},r=e=>/(?:https?):\/\/(\w+:?\w*)?(\S+)(:\d+)?(\/|\/([\w#!:.?+=&%!\-\/]))?/.test(e),g=o=>{let a=[];try{if(["decreto","oficio","portaria","ata_1","ata_2","ata_3","ata_4","ata_5","ata_6","ata_7","ata_8","relatorio"].forEach(e=>{var t=document.getElementById(e);t&&(t.setAttribute("disabled",""),t.href="javascript:void(0)"),o[e]?r(o[e])?(t.removeAttribute("disabled"),t.href=o[e]):a.push(o.nome+`: O link da coluna [${e}] não é válido, favor verifique a coluna referente na planilha`):a.push(o.nome+`: O link da coluna [${e}] está vazio, favor preencha a coluna referente na planilha`)}),0<a.length)throw a.join("\n")}catch(e){console.warn(e)}};return{init:async()=>{await(async()=>{t=[];try{return await fetch("https://docs.google.com/spreadsheets/d/e/2PACX-1vSKjbVEAOBxbriAp56pX9t_fgxGZ1BnfypCycupgGEkzKRt4wbzmV2tZ98D0va_SBD1Uy5od9EqCGkC/pub?gid=0&single=true&output=csv").then(e=>{if(e.ok)return e.text().catch(e=>{throw"Não foi possivel converter os dados da tabela corretamente"});throw"Ocorreu erro de conexão"}).then(e=>{e=Papa.parse(e,{header:!0,transformHeader:!0,dynamicTyping:!0,skipFirstNLines:!0});if(0<e.errors.length)throw e.errors.join("\n");return t=e.data}).catch(e=>{throw e instanceof TypeError&&e.message.includes("Failed to fetch")?"É possivel que haja um problema de compartilhamento de dado ou erro no endereço de requisição":e})}catch(e){throw console.error(e),e}})(),t.map(t=>{var e,o,a,r;t.status&&({fill:e,stroke:o,color:a}=p.find(e=>e.status===t.status),e)&&((r=document.getElementById(t.id)).style.fill=e,r.style.stroke=o,r.style.color=a)})},showTooltip:(e,t)=>{var o,a,r,l;e=e,t=t,o=document.getElementById("stgTooltip"),a=window.getComputedStyle(e.target).fill,r=window.getComputedStyle(e.target).stroke,l=window.getComputedStyle(e.target).color,o.innerHTML=t,o.style.display="block",o.style.background=a,o.style.borderColor=r,o.style.color=l,o.style.left=e.pageX+10+"px",o.style.top=e.pageY+10+"px"},hideTooltip:()=>{document.getElementById("stgTooltip").style.display="none"},selectBoxChange:e=>{e=e,i=document.getElementById("cidade_nulo"),c=document.getElementById("cidade_dados"),f=document.getElementById("cidade_titulo"),e?(i.style.display="none",c.style.display="block",o(e)):(i.style.display="block",c.style.display="none",f.innerText="",document.querySelector(".active").classList.remove("active"))},setMapData:e=>{o(e)}}})();
